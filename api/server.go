package api

import (
	"github.com/gofiber/fiber/v2"
	"net/http"
	"pentest-backend/api/controllers/guest"
	"pentest-backend/api/middleware"
)

func StartServer() {
	app := fiber.New() // Creates an instance of fiber

	//TODO: route groups here

	//Guest route
	app.Get("/", func(ctx *fiber.Ctx) error { return ctx.SendStatus(http.StatusAccepted) })
	app.Post("/login", guest.HandleLogin)

	//User route
	user := app.Group("/user")
	user.Use(middleware.VerifyCookie)
	app.Get("/", func(ctx *fiber.Ctx) error { return ctx.SendStatus(http.StatusAccepted) })

	err := app.Listen(":8080") //Creates an app on HTTP port 8080

	if err != nil {
		return
	}
}
